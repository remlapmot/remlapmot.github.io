---
title: 'Running MLwiN using mlnscript via the R2MLwiN R package on Apple Silicon Macs '
author: Package Build
date: '2023-09-22'
slug: mlnscript-r2mlwin-apple-silicon
categories:
  - Blog
tags:
  - R
  - MLwiN
subtitle: ''
summary: 'How to run MLwiN on Apple Silicon Macs via R.'
authors: []
#lastmod: '2023-09-15T13:02:36+01:00'
featured: no
draft: no
image:
  caption: ''
  focal_point: 'Centre'
  preview_only: no
projects: []
bibliography: refs.bib
link-citations: true
---

```{r include=FALSE}
knitr::opts_chunk$set(
  message = FALSE,
  warning = FALSE,
  collapse = TRUE,
  comment = '#>'
)
```

## Introduction

The aim of this post is to get MLwiN running on Apple Silicon Macs in R using the **R2MLwiN** package [@mlwin;@r2mlwin]. This turns out to be pretty straightforward since there is a non-graphical version of MLwiN called `mlnscript` (`mlnscript.exe` on Windows) with an accompanying library `libmln.dylib`.

* First obtain the `MLN.dmg` installer from the Centre for Multilevel Modelling and then install it, see the relevant download page (depending upon whether you are an academic) on the MLwiN [webpages](https://www.bristol.ac.uk/cmm/software/mlwin/).
* On macOS it is recommended to install the files into the `/opt/mln/` directory (which you will need to create and which you will need Admin permissions to create. If you don't have an Admin account simply create a new directory in another location).
* Once installed we can check that `mlnscript` and `libmln.dylib` are universal binaries,
  ```
  % lipo -archs /opt/mln/mlnscript
  x86_64 arm64
  % lipo -archs /opt/mln/libmln.dylib
  x86_64 arm64
  ```
  since both architectures are listed this indicates both files are universal binaries.

* Now we need to install the **R2MLwiN** package from CRAN.
  ```r
  install.packages("R2MLwiN")
  ```

## Running an example

```{r}
library(R2MLwiN)
# if you did not install in /opt/mln , set:
# options(MLwiN_path = "/path-to/mlnscript")
```

## Summary

In summary, although it has *Win* in its name, the core libraries for running MLwiN on other platforms, including macOS for both Intel and Apple Silicon chips and versions of Linux, have been available for sometime.

## References
