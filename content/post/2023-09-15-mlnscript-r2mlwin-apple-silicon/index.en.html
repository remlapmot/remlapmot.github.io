---
title: 'Running MLwiN using mlnscript via the R2MLwiN R package on Apple Silicon Macs '
author: Package Build
date: '2023-09-22'
slug: mlnscript-r2mlwin-apple-silicon
categories:
  - Blog
tags:
  - R
  - MLwiN
subtitle: ''
summary: 'How to run MLwiN on Apple Silicon Macs via R.'
authors: []
#lastmod: '2023-09-15T13:02:36+01:00'
featured: no
draft: no
image:
  caption: ''
  focal_point: 'Centre'
  preview_only: no
projects: []
bibliography: refs.bib
link-citations: true
---



<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>This post shows how to run MLwiN on Apple Silicon Macs from R using the <strong>R2MLwiN</strong> package <span class="citation">(<a href="#ref-mlwin">Charlton et al. 2023</a>; <a href="#ref-r2mlwin">Zhang et al. 2016</a>)</span>. This is achieved using the non-graphical version of MLwiN called <code>mlnscript</code> (<code>mlnscript.exe</code> on Windows) which has an accompanying library <code>libmln.dylib</code>.<a href="#fn1" class="footnote-ref" id="fnref1"><sup>1</sup></a></p>
</div>
<div id="setup-steps" class="section level2">
<h2>Setup steps</h2>
<ul>
<li><p>Obtain the <code>MLN.dmg</code> installer from the Centre for Multilevel Modelling and then install it, see the relevant download page (depending upon whether you are an academic) on the MLwiN <a href="https://www.bristol.ac.uk/cmm/software/mlwin/">website</a>.</p></li>
<li><p>On macOS it is recommended to install the files into the <code>/opt/mln/</code> directory, which you will need to create with Admin permissions, or install to another directory if you don’t have Admin permissions.</p></li>
<li><p>Once installed we can check that <code>mlnscript</code> and <code>libmln.dylib</code> are universal binaries,</p>
<pre class="bash"><code>lipo -archs /opt/mln/mlnscript
#&gt; x86_64 arm64</code></pre>
<pre class="bash"><code>lipo -archs /opt/mln/libmln.dylib
#&gt; x86_64 arm64</code></pre>
<p>since both architectures are listed this indicates both files are universal binaries. Apple Silicon Macs will use the arm64 architecture.</p></li>
<li><p>Now we need to grant the two files permission to run. To do this run in the Terminal app</p>
<pre class="bash"><code>/opt/mln/mlnscript --version</code></pre>
<p>which will fail with a pop-up similar to the following.
<img src="img/security-warning.png" width="259" />
Click <em>Cancel</em> and then go into the <em>System settings…</em> | <em>Privacy &amp; Security</em> and scroll down and click <em>Allow Anyway</em>
<img src="img/mlnscript-security.png" width="466" />
Do the same for <code>libmln.dylib</code>.</p></li>
<li><p>We can then check it’s running with</p>
<pre class="bash"><code>/opt/mln/mlnscript --version
#&gt; 3.08</code></pre>
<p>which should output the version number, which is currently 3.08.</p></li>
<li><p>In R we then install the <strong>R2MLwiN</strong> package from CRAN.</p>
<pre class="r"><code>install.packages(&quot;R2MLwiN&quot;)</code></pre></li>
<li><p>For an example we could run one of the demos in the package, which we can list with</p>
<pre class="r"><code>demo(package = &quot;R2MLwiN&quot;)</code></pre>
<p>Then run one (output omitted), for example</p>
<pre class="r"><code>library(R2MLwiN)
# if you did not install mlnscript in /opt/mln , set:
# options(MLwiN_path = &quot;/path-to/mlnscript&quot;)
demo(UserGuide02)</code></pre></li>
</ul>
</div>
<div id="summary" class="section level2">
<h2>Summary</h2>
<p>Despite having <em>Win</em> in its name, the core libraries for running MLwiN on other platforms, including macOS for both Intel and Apple Silicon processors and various Linux and Unix distributions (Debian, Fedora, FreeBSD, Rocky, and Ubuntu), have been available for sometime and are straightforward to use from R via the R2MLwiN package.</p>
</div>
<div id="references" class="section level2 unnumbered">
<h2>References</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-mlwin" class="csl-entry">
Charlton, C, J Rasbash, W. J Browne, M Healy, and B Cameron. 2023. <em><span>MLwiN</span> Version 3.07</em>. Bristol, UK: Centre for Multilevel Modelling, University of Bristol. <a href="https://www.bristol.ac.uk/cmm/software/mlwin/">https://www.bristol.ac.uk/cmm/software/mlwin/</a>.
</div>
<div id="ref-r2mlwin" class="csl-entry">
Zhang, Zhengzheng, Richard M. A. Parker, Christopher M. J. Charlton, George Leckie, and William J. Browne. 2016. <span>“<span>R2MLwiN</span>: A Package to Run <span>MLwiN</span> from Within <span>R</span>.”</span> <em>Journal of Statistical Software</em> 72 (10): 1–43. <a href="https://doi.org/10.18637/jss.v072.i10">https://doi.org/10.18637/jss.v072.i10</a>.
</div>
</div>
</div>
<div class="footnotes footnotes-end-of-document">
<hr />
<ol>
<li id="fn1"><p>This post is essentially a more detailed explanation of the advice given on the MLwiN website, <a href="https://www.bristol.ac.uk/cmm/software/support/support-faqs/commands-macros.html">here</a> and <a href="https://www.bristol.ac.uk/cmm/software/mlwin/features/sysreq.html#unix">here</a>.<a href="#fnref1" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
