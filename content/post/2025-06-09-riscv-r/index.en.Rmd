---
title: "Investigating running R on RISC-V thanks to Ubuntu"
author: Package Build
date: '2025-06-09'
slug: riscv-r
categories:
  - Blog
tags:
  - R
  - RISCV
  - Ubuntu
  - Linux
subtitle:
summary: "How to run R on RISCV on Ubuntu Linux."
authors: []
lastmod: '2025-06-09T10:00:00+00:00'
featured: no
image:
  caption: ''
  focal_point: 'Center'
  preview_only: no
  alt_text: 'TODO:Alt text!.'
projects: []
toc: true
---

## Introduction

I was interested to see whether and how well R would run on the new RISC-V architecture.

I read that RISC-V was now a first class architecture for Ubuntu.

This got me thinking, instead of having to build R from source maybe the `r-base` package might be available for RISC-V. It turns out that this is indeed the case, the architecture is `riscv64`.


## Emulating RISC-V on an Apple Silicon Mac

My setup is that I'm on an Apple Silicon M4 MacBook Air. I thought this might be promising to use because this has an ARM processor which is also a reduced instruction set architecture.

I wondered whether to try UTM or qemu at the command line. I tried UTM first but I couldn't make any progress. So I found a tip online saying that RISC-V Ubuntu could be launched under Qemu on Ubuntu Linux using

```sh
qemu-system-riscv64 \
  -machine virt \
  -nographic \
  -m 12288 -smp 4 \
  -bios /usr/lib/riscv64-linux-gnu/opensbi/generic/fw_jump.elf \
  -kernel /usr/lib/u-boot/qemu-riscv64_smode/uboot.elf \
  -device virtio-net-pci,netdev=eth0 \
  -netdev user,id=eth0,hostfwd=tcp::2222-:22 \
  -drive file=ubuntu-24.10-preinstalled-server-riscv64.img,format=raw,if=virtio
```

Firstly one needs to obtain the Ubuntu img. Following [this incredible guide by Canonical](https://canonical-ubuntu-boards.readthedocs-hosted.com/en/latest/how-to/qemu-riscv/) we can choose one of the three versions of Ubuntu listed (Noble, Oracular, Plucky).

The image downloads as an _.img.xz_ archive, which you can extract by installing `xz`

```sh
brew install xz
```

and running

```sh
xz --decompress ubuntu-24.10-preinstalled-server-riscv64.img.xz
```

The extracted file is about 4GB, but later on I realised I needed a slightly larger harddisk for the virtual machine, so I increased it to 8GB with the following command.

```sh
qemu-img resize ubuntu-24.10-preinstalled-server-riscv64.img 8G
```

I then realised that I needed qemu on my Mac. Again Homebrew to the rescue with the following command.

```sh
brew install qemu u-boot-tools
```

(Admittedly I don't think I ended up using the _u-boot-tools_) Next I needed the two files; _fw_jump.elf_ and _uboot.elf_. I had a look in _/opt/homebrew/Cellar/qemu/10.0.2/_ but I couldn't work out if they are in there or not (there are some zip archives). I then remembered reading a comment that a user had copied them from an Ubuntu installation. I resorted to the same trick thanks to Docker.

```sh

```


<img src="/post/2025/blackboard-accordion/img/wider-accordion.png" alt="Screenshot of 360Â° View of our CSS file." width="630" style="display: block; margin: auto;">

## Summary

